---
// Header â€” logo at public/logo.png
// TODO: Reemplazar todos los campos marcados con [PLACEHOLDER] con los datos del cliente

// â”€â”€ Horarios de AtenciÃ³n â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Modificar estos valores para configurar el badge Abierto/Cerrado
const SHIFT_1_START = { h: 11, m: 0  }; // TODO: Turno maÃ±ana - inicio
const SHIFT_1_END   = { h: 13, m: 45 }; // TODO: Turno maÃ±ana - cierre
const SHIFT_2_START = { h: 19, m: 15 }; // TODO: Turno noche - inicio
const SHIFT_2_END   = { h: 25, m: 0  }; // TODO: Turno noche - cierre (25:00 = 01:00 AM)
---

<header class="theme-header sticky top-0 z-50 w-full bg-[#FFC520] border-b-4 border-[#1A1A1A]" style="box-shadow: 0 4px 0 rgba(26,26,26,1);">
  <div class="max-w-4xl mx-auto px-3 py-3">

    <!-- Row 1: logo + name + badge (all in one line, tightly packed) -->
    <div class="flex items-center gap-2.5">

      <!-- Logo: larger for neobrutalist chunky feel -->
      <div class="relative flex-shrink-0">
        <div
          class="w-16 h-16 rounded-xl overflow-hidden flex items-center justify-center bg-[#FDFDFD] border-[3px] border-[#1A1A1A]"
          style="box-shadow: 4px 4px 0px #1A1A1A;"
        >
          <img
            src="/img/logo.jpg"
            alt="Papa Chula"
            class="w-full h-full object-contain"
            onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
          />
          <!-- Fallback -->
          <div
            class="w-full h-full items-center justify-center text-3xl font-black"
            style="display: none; background: #FFC520; color: #1A1A1A; font-family: 'Nunito', sans-serif;"
          >
            ğŸŸ
          </div>
        </div>
      </div>

      <!-- Brand name â€” min-width: 0 so it can shrink -->
      <div class="flex flex-col leading-none justify-center min-w-0 flex-1">
        <span
          class="tracking-widest leading-none truncate uppercase text-[#1A1A1A]"
          style="font-family: 'Bangers', cursive; font-size: clamp(1.5rem, 6vw, 2.2rem); text-shadow: 2px 2px 0px #FDFDFD, -1px -1px 0 #FDFDFD, 1px -1px 0 #FDFDFD, -1px 1px 0 #FDFDFD, 1px 1px 0 #FDFDFD;"
        >
          PAPA CHULA
        </span>
        <div class="flex items-center mt-1">
          <span class="font-bold tracking-tight truncate bg-[#E52521] text-[#FDFDFD] px-2 py-0.5 rounded-md border-2 border-[#1A1A1A] transform -rotate-2" style="font-family: 'Nunito', sans-serif; font-size: clamp(0.6rem, 2.2vw, 0.75rem); box-shadow: 2px 2px 0px #1A1A1A;">
            fritas & toppings
          </span>
        </div>
      </div>

      <!-- Open/Closed badge â€” flex-shrink-0 so it never gets cut off -->
      <div
        id="hours-badge"
        class="flex-shrink-0 flex items-center gap-1.5 px-3 py-1 font-black uppercase tracking-widest"
        style="font-family: 'Nunito', sans-serif; font-size: 0.75rem; border: 3px solid #1A1A1A !important; box-shadow: 3px 3px 0px #1A1A1A !important; border-radius: 8px !important; background: #FDFDFD;"
      >
        <span id="hours-dot" class="w-2.5 h-2.5 rounded-full border-2 border-[#1A1A1A] !important" style="background: #4CAF50;"></span>
        <span id="hours-label">Abierto</span>
      </div>
    </div>

  </div>
</header>

<script>
  // â”€â”€ Business Hours Config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // TODO: Actualizar con los horarios reales del cliente
  const SHIFT_1_START = { h: 11, m: 0  };
  const SHIFT_1_END   = { h: 13, m: 45 };
  const SHIFT_2_START = { h: 19, m: 15 };
  const SHIFT_2_END   = { h: 25, m: 0  }; // 25:00 = 01:00 AM del dÃ­a siguiente

  function isOpen(): boolean {
    const now = new Date();
    const totalMins = now.getHours() * 60 + now.getMinutes();

    const s1Start = SHIFT_1_START.h * 60 + SHIFT_1_START.m;
    const s1End   = SHIFT_1_END.h   * 60 + SHIFT_1_END.m;
    const s2Start = SHIFT_2_START.h * 60 + SHIFT_2_START.m;
    const s2End   = SHIFT_2_END.h   * 60 + SHIFT_2_END.m;

    const extendedMins = totalMins < 2 * 60 ? totalMins + 24 * 60 : totalMins;

    const inShift1 = totalMins >= s1Start && totalMins <= s1End;
    const inShift2 = extendedMins >= s2Start && extendedMins <= s2End;

    return inShift1 || inShift2;
  }

  function updateBadge() {
    const badge = document.getElementById('hours-badge');
    const dot   = document.getElementById('hours-dot');
    const label = document.getElementById('hours-label');
    if (!badge || !dot || !label) return;

    if (isOpen()) {
      badge.style.background = '#FDFDFD';
      badge.style.color = '#1A1A1A';
      badge.style.border = '2px solid #1A1A1A';
      dot.style.background = '#4CAF50';
      label.textContent = 'Abierto';
    } else {
      badge.style.background = '#E52521';
      badge.style.color = '#FDFDFD';
      badge.style.border = '2px solid #1A1A1A';
      badge.style.boxShadow = '2px 2px 0px #1A1A1A';
      dot.style.background = '#FDFDFD';
      dot.classList.remove('animate-pulse');
      label.textContent = 'Cerrado';
    }
  }

  updateBadge();
  setInterval(updateBadge, 60_000);
</script>
