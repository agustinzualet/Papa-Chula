---
// Header â€” logo at public/logo.png
// TODO: Reemplazar todos los campos marcados con [PLACEHOLDER] con los datos del cliente

// â”€â”€ Horarios de AtenciÃ³n â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Modificar estos valores para configurar el badge Abierto/Cerrado
const SHIFT_1_START = { h: 11, m: 0  }; // TODO: Turno maÃ±ana - inicio
const SHIFT_1_END   = { h: 13, m: 45 }; // TODO: Turno maÃ±ana - cierre
const SHIFT_2_START = { h: 19, m: 15 }; // TODO: Turno noche - inicio
const SHIFT_2_END   = { h: 25, m: 0  }; // TODO: Turno noche - cierre (25:00 = 01:00 AM)
---

<header class="theme-header sticky top-0 z-50 w-full" style="box-shadow: 0 2px 20px rgba(245,166,35,0.15);">
  <div class="max-w-4xl mx-auto px-3 py-2">

    <!-- Row 1: logo + name + badge (all in one line, tightly packed) -->
    <div class="flex items-center gap-2.5">

      <!-- Logo: 56px mobile -->
      <div class="relative flex-shrink-0">
        <div
          class="w-14 h-14 rounded-full overflow-hidden flex items-center justify-center"
          style="border: 2px solid #F5A623; box-shadow: 0 0 16px rgba(245,166,35,0.35);"
        >
          <img
            src="/logo.png"
            alt="[NOMBRE LOCAL]"
            class="w-full h-full object-cover"
            onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';"
          />
          <!-- Fallback -->
          <div
            class="w-full h-full items-center justify-center text-2xl"
            style="display: none; background: linear-gradient(135deg, #F5A623, #C8841A);"
          >
            ğŸ”
          </div>
        </div>
        <!-- Celeste Argentina accent dot -->
        <div
          class="absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-2"
          style="background: #75AADB; border-color: #1A0F08;"
        ></div>
      </div>

      <!-- Brand name â€” min-width: 0 so it can shrink -->
      <div class="flex flex-col leading-none justify-center min-w-0 flex-1">
        <span
          class="font-black tracking-tight leading-none truncate"
          style="color: var(--color-brand-bordo); font-size: clamp(1.1rem, 5vw, 1.75rem); text-shadow: 1px 1px 0 rgba(245,166,35,0.3);"
        >
          [NOMBRE LOCAL]
        </span>
        <div class="flex items-center gap-1.5 mt-0.5">
          <div class="w-3 h-0.5 rounded-full flex-shrink-0" style="background: #75AADB;"></div>
          <span class="font-medium tracking-wider truncate" style="color: #9A8070; font-size: clamp(0.55rem, 2.2vw, 0.7rem);">
            [ESLOGAN DEL LOCAL]
          </span>
        </div>
      </div>

      <!-- Open/Closed badge â€” flex-shrink-0 so it never gets cut off -->
      <div
        id="hours-badge"
        class="flex-shrink-0 flex items-center gap-1 px-2 py-1 rounded-full font-bold"
        style="background: rgba(46,125,50,0.15); color: #4CAF50; border: 1px solid rgba(46,125,50,0.3); font-size: 0.7rem;"
      >
        <span id="hours-dot" class="w-1.5 h-1.5 rounded-full animate-pulse flex-shrink-0" style="background: #4CAF50;"></span>
        <span id="hours-label">Abierto</span>
      </div>
    </div>

  </div>
</header>

<script>
  // â”€â”€ Business Hours Config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // TODO: Actualizar con los horarios reales del cliente
  const SHIFT_1_START = { h: 11, m: 0  };
  const SHIFT_1_END   = { h: 13, m: 45 };
  const SHIFT_2_START = { h: 19, m: 15 };
  const SHIFT_2_END   = { h: 25, m: 0  }; // 25:00 = 01:00 AM del dÃ­a siguiente

  function isOpen(): boolean {
    const now = new Date();
    const totalMins = now.getHours() * 60 + now.getMinutes();

    const s1Start = SHIFT_1_START.h * 60 + SHIFT_1_START.m;
    const s1End   = SHIFT_1_END.h   * 60 + SHIFT_1_END.m;
    const s2Start = SHIFT_2_START.h * 60 + SHIFT_2_START.m;
    const s2End   = SHIFT_2_END.h   * 60 + SHIFT_2_END.m;

    const extendedMins = totalMins < 2 * 60 ? totalMins + 24 * 60 : totalMins;

    const inShift1 = totalMins >= s1Start && totalMins <= s1End;
    const inShift2 = extendedMins >= s2Start && extendedMins <= s2End;

    return inShift1 || inShift2;
  }

  function updateBadge() {
    const badge = document.getElementById('hours-badge');
    const dot   = document.getElementById('hours-dot');
    const label = document.getElementById('hours-label');
    if (!badge || !dot || !label) return;

    if (isOpen()) {
      badge.style.background = 'rgba(46,125,50,0.15)';
      badge.style.color = '#4CAF50';
      badge.style.border = '1px solid rgba(46,125,50,0.3)';
      dot.style.background = '#4CAF50';
      label.textContent = 'Abierto';
    } else {
      badge.style.background = 'rgba(107,45,14,0.2)';
      badge.style.color = '#F5A623';
      badge.style.border = '1px solid rgba(245,166,35,0.3)';
      dot.style.background = '#F5A623';
      dot.classList.remove('animate-pulse');
      label.textContent = 'Cerrado';
    }
  }

  updateBadge();
  setInterval(updateBadge, 60_000);
</script>
